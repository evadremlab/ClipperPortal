@{
    ViewBag.Title = "Replacement Vehicles Grid";
}

<div style="width: 100%; margin-left:20px">
    <table id="grid"></table>
    <div id="gridPager"></div>
</div>

@section Scripts
{
    <script type="text/javascript">
        var mydata = [
                { id: "10",  invdate: "2007-10-01", name: "test",   note: "note",   amount: "",       tax: "",      closed: true,  ship_via: "TN", total: "" },
                { id: "20",  invdate: "2007-10-02", name: "test2",  note: "note2",  amount: "300.00", tax: "20.00", closed: false, ship_via: "FE", total: "320.00" },
                { id: "30",  invdate: "2007-09-01", name: "test3",  note: "note3",  amount: "400.00", tax: "30.00", closed: false, ship_via: "FE", total: "430.00" },
                { id: "40",  invdate: "2007-10-04", name: "test4",  note: "note4",  amount: "200.00", tax: "10.00", closed: true,  ship_via: "TN", total: "210.00" },
                { id: "50",  invdate: "2007-10-31", name: "test5",  note: "note5",  amount: "300.00", tax: "20.00", closed: false, ship_via: "FE", total: "320.00" },
                { id: "60",  invdate: "2007-09-06", name: "test6",  note: "note6",  amount: "400.00", tax: "30.00", closed: false, ship_via: "FE", total: "430.00" },
                { id: "70",  invdate: "2007-10-04", name: "test7",  note: "note7",  amount: "200.00", tax: "10.00", closed: true,  ship_via: "TN", total: "210.00" },
                { id: "80",  invdate: "2007-10-03", name: "test8",  note: "note8",  amount: "300.00", tax: "20.00", closed: false, ship_via: "FE", total: "320.00" },
                { id: "90",  invdate: "2007-09-01", name: "test9",  note: "note9",  amount: "400.00", tax: "30.00", closed: false, ship_via: "TN", total: "430.00" },
                { id: "100", invdate: "2007-09-08", name: "test10", note: "note10", amount: "500.00", tax: "30.00", closed: true,  ship_via: "TN", total: "530.00" },
                { id: "110", invdate: "2007-09-08", name: "test11", note: "note11", amount: "500.00", tax: "30.00", closed: false, ship_via: "FE", total: "530.00" },
                { id: "120", invdate: "2007-09-10", name: "test12", note: "note12", amount: "500.00", tax: "30.00", closed: false, ship_via: "FE", total: "530.00" }
        ];

        var $grid = $("#grid");

        var initDateEdit = function (elem) {
            $(elem).datepicker({
                dateFormat: "dd-M-yy",
                autoSize: true,
                changeYear: true,
                changeMonth: true,
                showButtonPanel: true,
                showWeek: true
            });
        }

        var initDateSearch = function (elem) {
            setTimeout(function () {
                initDateEdit(elem);
            }, 100);
        };

        $grid.jqGrid({
            data: mydata,
            colNames: ["", "Client", "Date", "Amount", "Tax", "Total", "Closed", "Shipped via", "Notes"],
            colModel: [
                { name: "act", template: "actions", width: 105 },
                { name: "name", align: "center", width: 92, editrules: {required: true} },
                { name: "invdate", width: 72, align: "center", sorttype: "date", frozen: true,
                    formatter: "date", formatoptions: { newformat: "d-M-Y", reformatAfterEdit: true }, datefmt: "d-M-Y",
                    editoptions: { dataInit: initDateEdit },
                    searchoptions: { sopt: ["eq", "ne", "lt", "le", "gt", "ge"], dataInit: initDateSearch } },
                { name: "amount", width: 56, template: "number" },
                { name: "tax", width: 35, template: "number", autoResizableMinColSize: 40 },
                { name: "total", width: 43, template: "number" },
                { name: "closed", width: 49, template: "booleanCheckboxFa" },
                { name: "ship_via", width: 76, align: "center", formatter: "select",
                    edittype: "select", editoptions: { value: "FE:FedEx;TN:TNT;IN:Intim", defaultValue: "IN" },
                    stype: "select", searchoptions: { sopt: ["eq", "ne"], value: ":Any;FE:FedEx;TN:TNT;IN:IN" } },
                { name: "note", width: 43, edittype: "textarea", sortable: false }
            ],
            cmTemplate: { editable: true, autoResizable: true },
            iconSet: "fontAwesome",
            rowNum: 10,
            autoResizing: { compact: true },
            rowList: [5, 10, 20, "10000:All"],
            viewrecords: true,
            pager: true,
            toppager: true,
            inlineEditing: { keys: true, position: "afterSelected" },
            rownumbers: true,
            sortname: "invdate",
            sortorder: "desc",
            caption: "Demonstration of the usage custom action buttons",
            actionsNavOptions: {
                addUsericon: "fa-user-plus",
                addUsertitle: "Add user",
                deleteUsericon: "fa-user-times",
                deleteUsertitle: "Delete user",
                addToCarticon: "fa-cart-plus",
                addToCarttitle: "Add item to the cart",
                custom: [
                    { action: "addUser", position: "first", onClick: function (options) { alert("Add user, rowid=" + options.rowid); } },
                    { action: "addToCart", position: "first", onClick: function (options) { alert("Add to Cart, rowid=" + options.rowid); } },
                    { action: "deleteUser", onClick: function (options) { alert("Delete user, rowid=" + options.rowid); } }
                ]
            }
        }).jqGrid("gridResize");
        //$(function () {
        //    $("#grid").jqGrid({
        //        url: 'api/ReplacementVehiclesAPI',
        //        mtype: "POST",
        //        styleUI: 'Bootstrap',
        //        datatype: "json",
        //        colModel: [
        //            { label: 'ID', name: 'ID', key: true, width: 50 },
        //            { label: 'Agency', name: 'Agency', width: 50 },
        //            { label: 'Calendar Year', name: 'CalendarYear', width: 50 },
        //            { label: 'Manufacturer', name: 'Manufacturer', width: 50 },
        //            { label: 'Other Manufacturer', name: 'OtherManufacturer', width: 50 },
        //            { label: 'Vehicle Count', name: 'VehicleCount', width: 50 },
        //            { label: 'Vehicle Model', name: 'VehicleModel', width: 50 },
        //            { label: 'User Name', name: 'UserName', width: 50 },
        //            { label: 'Record Status', name: 'RecordStatus', width: 50 }
        //        ],
        //        viewrecords: true,
        //        height: 250,
        //        rowNum: 20,
        //        pager: "#gridPager"
        //    });
        //});
    </script>
}
