@using System.Web;
@using GridMvc.Html
@model IEnumerable<ClipperPortal.Models.DeviceSurvey>

@{
    ViewBag.Title = "Clipper - Device Surveys";

    var message = string.Empty;
    var className = string.Empty;

    if (TempData.ContainsKey("Message"))
    {
        message = TempData["Message"].ToString();
    }
    else if (TempData.ContainsKey("ErrorMessage"))
    {
        className = "error-message";
        message = TempData["ErrorMessage"].ToString();
    }
}

<div class="device-survey list-page">
    <h2>Device Surveys</h2>
    @Html.ActionLink("Create New", "Create", null, new { @class = "btn btn-primary" })
    @{
        <span class="status-message @className">@message</span>
    }
    @Html.Grid(Model).Named("deviceSurveyGrid").Columns(columns =>
        {
        columns.Add(x => x.ID).Css("hidden");
        columns.Add(x => x.CalendarYear).Titled("Calendar Year").Sortable(true);
        columns.Add(x => x.Agency).Titled("Operator").Sortable(true);
        columns.Add(x => x.UserName).Titled("Staff Name").Sortable(true);
        columns.Add(x => x.HasGilligYN).Titled("Gillig").Sortable(true);
        columns.Add(x => x.HasNewFlyerYN).Titled("New Flyer").Sortable(true);
        columns.Add(x => x.HasElDoradoYN).Titled("El Dorado").Sortable(true);
        columns.Add(x => x.OtherName).Titled("Other").Sortable(true);
        columns.Add(x => x.RecordStatus).Titled("Record Status").Sortable(true);
        columns.Add(x => x.LastUpdated).Titled("Last Updated").Sortable(true);
        columns.Add().Encoded(false).Sanitized(false).RenderValueAs(x => Html.ActionLink("Edit", "Edit", new { id = x.ID }, new { @class = "btn btn-primary btn-xs" }));
        columns.Add().Encoded(false).Sanitized(false).RenderValueAs(x => @<button class="btn btn-danger btn-xs btn-delete" data-id="@x.ID">Delete</button>);
    }).WithPaging(15)
</div>

@section Scripts
{
    <script type="text/javascript">
        //PageManager.startStatusMessageTimer();

        $(function () {
            //PageManager.bind();
        });
    </script>
}
